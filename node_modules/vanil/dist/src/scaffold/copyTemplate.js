"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.copyTemplate = void 0;
const fs_1 = require("fs");
const path_1 = require("path");
const copyAndMaterializeFile_1 = require("./copyAndMaterializeFile");
const ignoredDirs = ['.git', 'node_modules', 'dist'];
const getFiles = (dir, tplBaseDir, fileDiscoveredCb) => {
    for (let i = 0; i < ignoredDirs.length; i++) {
        const ignoredDirectoryCandiate = ignoredDirs[i];
        if (dir.replace(`${tplBaseDir}${path_1.sep}`, '').startsWith(ignoredDirectoryCandiate) || dir.indexOf('.DS_Store') > -1) {
            return;
        }
    }
    const files = (0, fs_1.readdirSync)(dir);
    for (const i in files) {
        const path = dir + path_1.sep + files[i];
        if ((0, fs_1.statSync)(path).isDirectory()) {
            getFiles(path, tplBaseDir, fileDiscoveredCb);
        }
        else {
            fileDiscoveredCb(path);
        }
    }
};
const copyTemplate = (projectPath, templateFolderPath, concreteName) => {
    console.log();
    console.log('Creating files:');
    getFiles(templateFolderPath, templateFolderPath, (filePath) => (0, copyAndMaterializeFile_1.copyAndMaterializeFile)({
        filePath,
        templateFolderPath,
        projectPath,
        concreteName,
    }));
    return true;
};
exports.copyTemplate = copyTemplate;
